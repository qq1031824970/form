/*!
 * @form-create/component-subform v3.1.5
 * (c) 2018-2024 xaboy
 * Github https://github.com/xaboy/form-create with subform
 * Released under the MIT License.
 */
import{defineComponent as e,reactive as t,markRaw as a,nextTick as i,createVNode as s}from"vue";var l=e({name:"fcSubForm",props:{rule:Array,options:{type:Object,default:()=>t({submitBtn:!1,resetBtn:!1})},modelValue:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},syncDisabled:{type:Boolean,default:!0},formCreateInject:Object},data(){return{cacheValue:{},subApi:{},form:a(this.formCreateInject.form.$form())}},emits:["fc:subform","update:modelValue","change","itemMounted"],watch:{disabled(e){this.syncDisabled&&this.subApi.disabled(e)},modelValue(e){this.setValue(e)}},methods:{formData(e){this.cacheValue=JSON.stringify(e),this.$emit("update:modelValue",e),this.$emit("change",e)},setValue(e){const t=JSON.stringify(e);this.cacheValue!==t&&(this.cacheValue=t,this.subApi.coverValue(e||{}))},add$f(e){this.subApi=e,i((()=>{this.syncDisabled&&e.disabled(this.disabled),this.$emit("itemMounted",e)}))}},render(){const e=this.form;return s(e,{"onUpdate:modelValue":this.formData,modelValue:this.modelValue,"onEmit-event":this.$emit,"onUpdate:api":this.add$f,rule:this.rule,option:this.options,extendOption:!0},null)}});export{l as default};
