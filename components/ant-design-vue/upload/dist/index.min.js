/*!
 * @form-create/component-antdv-upload v3.1.30
 * (c) 2018-2024 xaboy
 * Github https://github.com/xaboy/form-create with upload
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FcUpload={},e.Vue)}(this,(function(e,t){"use strict";var i={name:"PlusOutlined"};const l={class:"anticon"},o=[t.createElementVNode("svg",{height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[t.createElementVNode("defs"),t.createElementVNode("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"}),t.createElementVNode("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"})],-1)];i.render=function(e,i,r,n,s,a){return t.openBlock(),t.createElementBlock("span",l,o)};const r=function(e,t){return{url:e,name:n(e),status:"done",uid:-1*(t+1)}},n=function(e){return(""+e).split("/").pop()},s=function(e){return{url:e.url,file:e,uid:e.uid}};var a=t.defineComponent({name:"fcUpload",inheritAttrs:!1,formCreateParser:{toFormValue:e=>function(e){return Array.isArray(e)?e:[null,void 0,""].indexOf(e)>-1?[]:[e]}(e),toValue:(e,t)=>1===t.prop.props.limit?e[0]||"":e},props:{limit:{type:Number,default:0},modelValue:{type:Array,default:()=>[]},onSuccess:{type:Function,required:!0},onPreview:Function,modalTitle:String,previewMask:void 0},emits:["update:modelValue","change","fc.el"],data(){return{previewImage:"",previewVisible:!1,uploadList:this.modelValue.map(r).map(s)}},watch:{modelValue(e){this.uploadList=e.map(r).map(s)}},methods:{handlePreview(e){this.onPreview?this.onPreview(...arguments):(this.previewImage=e.url,this.previewVisible=!0)},handleChange({file:e,fileList:t}){this.$emit("change",...arguments),this.uploadList=t,"done"===e.status?(this.onSuccess(e,t),this.input()):"removed"===e.status&&(t.forEach(((i,l)=>{i.file===e&&t.splice(l,1)})),this.input())},input(){this.$emit("update:modelValue",this.uploadList.map((e=>e.url)))}},render(){var e,l;const o=!this.limit||this.limit>this.uploadList.length,r=t.resolveComponent("AModal"),n={[r.props.open?"open":"visible"]:this.previewVisible};return t.createVNode(t.Fragment,null,[t.createVNode(t.resolveComponent("AUpload"),t.mergeProps({maxCount:this.limit,"list-type":"picture-card"},this.$attrs,{onPreview:this.handlePreview,onChange:this.handleChange,fileList:this.uploadList,ref:"upload"}),{default:()=>[o?(null===(e=(l=this.$slots).default)||void 0===e?void 0:e.call(l))||t.createVNode(i,{style:"font-size: 16px; width: 16px;"},null):null],...(s=this.$slots,a=["default"],Object.keys(s).reduce(((e,t)=>(a&&-1!==a.indexOf(t)||e.push(s[t]),e)),[]))}),t.createVNode(r,t.mergeProps({mask:this.previewMask,title:this.modalTitle},n,{onCancel:()=>this.previewVisible=!1,footer:null}),{default:()=>[t.createVNode("img",{style:"width: 100%",src:this.previewImage},null)]})]);var s,a},mounted(){this.$emit("fc.el",this.$refs.upload)}});e.default=a,Object.defineProperty(e,"__esModule",{value:!0})}));
