/*!
 * @form-create/component-tdesign-upload v3.1.30
 * (c) 2018-2024 xaboy
 * Github https://github.com/xaboy/form-create with upload
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Fcupload={},e.Vue)}(this,(function(e,t){"use strict";function o(e){return Array.isArray(e)?e:[null,void 0,""].indexOf(e)>-1?[]:[e]}function s(e,t){return{url:e,name:i(e),status:"success",uid:t}}function i(e){return(""+e).split("/").pop()}var u=t.defineComponent({name:"fcUpload",inheritAttrs:!1,formCreateParser:{toFormValue:e=>o(e),toValue:(e,t)=>1===t.prop.props.limit?e[0]||"":e},props:{limit:{type:Number,default:0},formCreateInject:Object,modelValue:{type:Array,default:[]},onSuccess:{type:Function},onRemove:{type:Function}},emits:["update:modelValue","fc.el"],data(){return{uploadList:o(this.modelValue).map(s)}},watch:{modelValue(e){this.uploadList=o(e).map(s)}},methods:{handleRemove({index:e}){this.uploadList.splice(e,1),this.onRemove&&this.onRemove(...arguments),this.input()},handleSuccess({file:e,fileList:t}){this.uploadList=t,"success"===e.status&&this.onSuccess&&this.onSuccess(...arguments),this.input()},input(){this.$emit("update:modelValue",this.uploadList.map((e=>e.url)))}},render(){const{uploadList:e,handleSuccess:o,handleRemove:s,$slots:i}=this;return t.createVNode(t.Fragment,null,[t.createVNode(t.resolveComponent("t-upload"),t.mergeProps({max:this.limit,theme:"image",accept:"image/*",modelValue:e},this.$attrs,{onSuccess:o,onRemove:s,ref:"el"}),i)])},mounted(){this.$emit("fc.el",this.$refs.el)}});e.default=u,Object.defineProperty(e,"__esModule",{value:!0})}));
